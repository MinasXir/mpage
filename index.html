<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./public/style/style.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"
          integrity="sha512-IQLehpLoVS4fNzl7IfH8Iowfm5+RiMGtHykgZJl9AWMgqx0AmJ6cRWcB+GaGVtIsnC4voMfm8f2vwtY+6oPjpQ=="
          crossorigin="anonymous"></script>
  </head>
  <body>
<div class="links">
  <div route="/about">
    <div class="content">
      <h2>ABOUT ME</h2>
    </div>
  </div>
  <div route="/contact">
    <div class="content">
      <h2>CONTACT ME</h2>
    </div>
  </div>
</div>
<div id="view"></div>
  <div class="intro">
    <div class="intro-text">
      <h1 class="hide">
        <span class="text">Creating inovation</span>
      </h1>
      <h1 class="hide">
        <span class="text">For Everyday</span>
      </h1>
      <h1 class="hide">
        <span class="text">people.</span>
      </h1>
    </div>
  </div>
  <div class="slider"></div>
    <script>
      const tl = gsap.timeline({ defaults: { ease: "power1.out" } });

        tl.to(".text", { y: "0%", duration: 1, stagger: 0.25 });
        tl.to(".slider", { y: "-100%", duration: 1.5, delay: 0.5 });
        tl.to(".intro", { y: "-100%", duration: 1 }, "-=1");
        tl.fromTo(".links > div", { opacity: 0 }, { opacity: 1, duration: 3 }, "-=1");
      function deleteIntro() {
          const intro = document.querySelector(".intro");
          if (intro) intro.remove();
          const slider = document.querySelector(".slider");
          if (slider) slider.remove();
      }
    
      setTimeout(() => {
       deleteIntro()
      }, 3500);

      window.addEventListener("DOMContentLoaded", (event) => {
        //select app view
        const view = document.getElementById("view");
        //select all buttons
        const activeRoutes = Array.from(
          document.querySelectorAll(".links [route]")
        );
        //Function for navigation
        function navigate(eEvent) {
          document.body.classList.remove("hmm");
          const route = eEvent.target.attributes[0].value;
          const routInfo = myFirstRouter.routes.filter((r) => {
            return r.path === route;
          })[0];
          !routInfo
            ? alert("No content here")
            : window.history.pushState({}, "name", routInfo.path);
          routInfo.content()
            ? (view.innerHTML = `<div class="${
                routInfo.class
              }">${routInfo.content()} </div>`)
            : null;
          homeNav();
          if (window.location.pathname === "/about") popUp();
        }
        //click event trigers navigation on videos click
        activeRoutes.forEach((route) => {
          route.addEventListener("click", navigate, true);
        });

        //data constructor
        const Router = function (name, routes) {
          return {
            name: name,
            routes: routes,
          };
        };
        const myFirstRouter = new Router("myFirstRouter", [
          {
            path: "/mpage/",
            name: "Home",
          },

          {
            path: "/about",
            name: "About",
            class: "about",
            content: () => {
              return ` <div class="goHome">&#8962</div>
              <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quae quibusdam delectus odit animi culpa sapiente officia adipisci quam sunt asperiores fuga deserunt illum officiis, repellat optio ipsum atque nam unde.</p>
                                          <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quae quibusdam delectus odit animi culpa sapiente officia adipisci quam sunt asperiores fuga deserunt illum officiis, repellat optio ipsum atque nam unde.</p>
                                                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quae quibusdam delectus odit animi culpa sapiente officia adipisci quam sunt asperiores fuga deserunt illum officiis, repellat optio ipsum atque nam unde.</p>
              <button ena="ena" id="modal-btn" class="button">One</button>
              <div id="my-modal" class="modal">
              <div class="modal-content">
              <div class="modal-header">
              <span class="close">&times;</span>
              <h2>Modal Header</h2>
              </div>
              <div class="modal-body">
                <div>
              <p>This is my modal</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla repellendus nisi, sunt consectetur ipsa velit
              repudiandae aperiam modi quisquam nihil nam asperiores doloremque mollitia dolor deleniti quibusdam nemo
              commodi ab.</p>
              </div>
              <div>
                 <img src="./img/bench.gif" alt="" width="100%" height="100%">
                </div>
              </div>
              <div class="modal-footer">
              <h3>Modal Footer</h3>
              </div>
              </div>
              </div>
              <button ena="dio" id="modal-btn" class="button">Two</button>
              <div id="my-modal" class="modal">
              <div class="modal-content">
              <div class="modal-header">
              <span class="close">&times;</span>
              <h2>Modal Header</h2>
              </div>
              <div class="modal-body">
                <div>
              <p>This is my modal dio</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla repellendus nisi, sunt consectetur ipsa velit
              repudiandae aperiam modi quisquam nihil nam asperiores doloremque mollitia dolor deleniti quibusdam nemo
              commodi ab.</p>
              </div>
              <div>
               <img src="./img/tzika.gif" alt="" width="100%" height="100%">
                </div>
              </div>
              <div class="modal-footer">
              <h3>Modal Footer</h3>
              </div>
              </div>
              </div>
              `;
            },
          },
          {
            path: "/contact",
            name: "Contact",
            class: "contact",
            content: () => {
              return `<div class="goHome">&#8962</div>
              <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quae quibusdam delectus odit animi culpa sapiente officia adipisci quam sunt asperiores fuga deserunt illum officiis, repellat optio ipsum atque nam unde.</p>
              `;
            },
          },
        ]);
        //Render the correct content based on pathname url
        function renderPage() {
          if (window.location.pathname === "/mpage/") {
            return (view.innerHTML = "");
          }
          if (window.location.pathname === "/about") {
            const welcomeSection = document.querySelector(".welcomeSection");
            if (welcomeSection) {
              welcomeSection.remove();
            }
            return (view.innerHTML = `<div class="${
              myFirstRouter.routes[1].class
            }">${myFirstRouter.routes[1].content()} </div>`);
          }
          if (window.location.pathname === "/contact") {
            const welcomeSection = document.querySelector(".welcomeSection");
            if (welcomeSection) {
              welcomeSection.remove();
            }
            return (view.innerHTML = `<div class="${
              myFirstRouter.routes[2].class
            }">${myFirstRouter.routes[2].content()} </div>`);
          } else alert("No content here");
        }
        renderPage();
        //Link to homepage
        function homeNav() {
          const btns = document.querySelectorAll(".goHome");
          for (var i = 0; i < btns.length; i++) {
            btns[i].addEventListener(
              "click",
              () => {
                window.history.pushState({}, "name", "/mpage/");
                document.body.classList.add("hmm");
                renderPage();
              },
              false
            );
          }
        }
        homeNav();
        //back browser button
        function browserbutton() {
          window.addEventListener("popstate", (event) => {
            renderPage();
            homeNav();
            if (window.location.pathname === "/about") popUp()
          });
        }
        browserbutton();
        //modal
        // Get DOM Elements
        function popUp() {
          const modal = document.querySelectorAll(".modal");
          const modalContent = document.querySelector(".modal-content");
          const modalBtn = document.querySelectorAll(".button");
          const closeBtn = document.querySelectorAll(".close");
          // Events
          modalBtn.forEach((mobtn)=>{mobtn.addEventListener("click", openModal)})
          closeBtn.forEach((close) => {
            close.addEventListener("click", closeModal)})
          window.addEventListener("click", outsideClick);
          // Open
          function openModal(e) {
            if(e.target.attributes[0].value === "ena")
           
            modal[0].style.display = "block";
                       if (e.target.attributes[0].value === "dio")
              modal[1].style.display = "block";
          }
          // Close
          function closeModal() {
            modal[0].style.display = "none";
            modal[1].style.display = "none";
          }
          // Close If Outside Click
          function outsideClick(e) {
            if (e.target == modal[0]) {
              modal[0].style.display = "none";
            }
            if (e.target == modal[1]){
              modal[1].style.display = "none";
            }
          }
        }
        if (window.location.pathname === "/about") {
          popUp();
        }

      });
    </script>
  </body>
</html>
